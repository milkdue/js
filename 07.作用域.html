<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
<!--     
        作用域
            - 一块代码的所在的区域
            - 它是静态的
        分类
            - 全局作用域
            - 函数作用域
            - eval作用域
        作用
            - 隔离变量
            - 规定当前函数之后创建作用域链的上一个链条是什么样的
        作用域和执行上下文的区别
            - 代码即将执行之前产生执行上下文
            - 代码定义的时候作用域已经固定了
            - 执行上下文是动态的
            - 作用域是静态的
            - 作用域是嵌套的
        联系
            上下文环境（对象）是从属于所在的作用域
            全局上下文环境===>全局作用域
            函数上下文环境===>对应的函数使用域

    作用域链
        1. 理解
        - 多个上下级关系的作用域形成的链式关系，它的方向是从下向上的
        - 作用域链是一个数组，保存着当前作用域的变量及其上级作用域的变量对象，直接到全局的变量对象
        - 查找变量时就是沿着作用域链来查找的
        2. 作用域链的产生
        - 函数在定义的时候自动添加一个属性[[scopes]]，该属性保存着上级作用域链
        - 当函数执行的时候，进入执行上下文环境，将创建的变量对象添加到[[scopes]]数组的第一个位置，形成一个新数组，该数组就是当前函数的作用域链
        3. 查找一个变量的查找规则
        - 先到当前作用域的变量对象中查找，如果有就使用
        - 如果没有就会沿着作用域链的数组去上级作用域中的变量对象中查找
        - 找到就返回对应的值，找不到继续向上查找，直到找到最后一个变量对象，如果还没有，报错 
-->

    <script>
        var a = 2;
        function fn1() {
            var b = 3;
            function fn2() {
                var c = 4;
                console.log(c);// 4
                console.log(b);// 3
                console.log(a);// 2
                console.log(d);// 报错
            }

            fn2();
        }
        fn1();
    </script>
</body>

</html>